# Universal Payment Protocol - Production Environment Configuration
# Copy this file to .env.production and configure for your production environment

# ======================================
# REQUIRED - Server Configuration
# ======================================
NODE_ENV=production
PORT=443
FRONTEND_URL=https://your-domain.com
CORS_ORIGINS=https://your-domain.com,https://admin.your-domain.com

# ======================================
# REQUIRED - Database Configuration
# ======================================
# Use your production PostgreSQL instance
DATABASE_URL=postgresql://upp_user:your_secure_password@your-db-host:5432/upp_production

# Redis for session management and caching
REDIS_URL=redis://your-redis-host:6379

# ======================================
# REQUIRED - Stripe Configuration
# ======================================
# Get these from your Stripe Dashboard (https://dashboard.stripe.com)
STRIPE_SECRET_KEY=sk_live_your_live_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_live_your_live_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_endpoint_secret_from_stripe_dashboard

# ======================================
# REQUIRED - Security Configuration
# ======================================
# Generate a secure 64+ character random string
JWT_SECRET=your_super_secure_jwt_secret_at_least_64_characters_long_random_string
JWT_EXPIRES_IN=24h

# 32+ character encryption key for sensitive data
ENCRYPTION_KEY=your_32_plus_character_encryption_key_for_sensitive_data

# ======================================
# Production Security Settings
# ======================================
# Rate limiting for API endpoints
API_RATE_LIMIT_REQUESTS=1000
API_RATE_LIMIT_WINDOW_MS=900000

# Payment-specific rate limiting (stricter)
PAYMENT_RATE_LIMIT_REQUESTS=10
PAYMENT_RATE_LIMIT_WINDOW_MS=60000

# Authentication rate limiting
AUTH_RATE_LIMIT_REQUESTS=5
AUTH_RATE_LIMIT_WINDOW_MS=900000

# ======================================
# Logging Configuration
# ======================================
LOG_LEVEL=info
LOG_TO_FILE=true
LOG_FILE_PATH=/var/log/upp/app.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10485760

# ======================================
# SSL/TLS Configuration
# ======================================
# Path to SSL certificate files
SSL_CERT_PATH=/etc/ssl/certs/your-domain.crt
SSL_KEY_PATH=/etc/ssl/private/your-domain.key
SSL_CA_PATH=/etc/ssl/certs/ca-certificates.crt

# Force HTTPS redirect
FORCE_HTTPS=true
TRUST_PROXY=true

# ======================================
# Monitoring & Health Checks
# ======================================
# Health check configuration
HEALTH_CHECK_INTERVAL=30000
DATABASE_HEALTH_TIMEOUT=5000
REDIS_HEALTH_TIMEOUT=3000

# Metrics and monitoring
METRICS_ENABLED=true
PROMETHEUS_PORT=9090
GRAFANA_ENABLED=true

# External monitoring services
NEW_RELIC_LICENSE_KEY=your_new_relic_license_key
DATADOG_API_KEY=your_datadog_api_key

# ======================================
# Email Configuration (for notifications)
# ======================================
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=notifications@your-domain.com
SMTP_PASS=your_smtp_password

# Admin notification emails
ADMIN_EMAIL=admin@your-domain.com
ALERT_EMAIL=alerts@your-domain.com

# ======================================
# Business Logic Configuration
# ======================================
# Payment processing limits
MAX_PAYMENT_AMOUNT=100000
MIN_PAYMENT_AMOUNT=50
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,EUR,GBP,CAD,AUD

# Device registration limits
MAX_DEVICES_PER_USER=50
DEVICE_SESSION_TIMEOUT=3600000

# Transaction settings
TRANSACTION_TIMEOUT=300000
PAYMENT_RETRY_ATTEMPTS=3
PAYMENT_RETRY_DELAY=5000

# ======================================
# Feature Flags
# ======================================
ENABLE_DEVICE_DISCOVERY=true
ENABLE_BIOMETRIC_AUTH=true
ENABLE_VOICE_PAYMENTS=true
ENABLE_IOT_PAYMENTS=true
ENABLE_GAMING_PAYMENTS=true
ENABLE_FRAUD_DETECTION=true

# ======================================
# Third-Party Integrations
# ======================================
# AWS Configuration (if using AWS services)
AWS_REGION=us-east-1
AWS_S3_BUCKET=upp-production-assets
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key

# Google Analytics
GA_TRACKING_ID=GA-XXXXXXXXX-X

# Social Media Integration
TWITTER_API_KEY=your_twitter_api_key
FACEBOOK_APP_ID=your_facebook_app_id

# ======================================
# Backup & Disaster Recovery
# ======================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=upp-production-backups

# ======================================
# Performance Configuration
# ======================================
# Connection pool settings
DB_POOL_SIZE=20
DB_POOL_TIMEOUT=30000

# Redis connection settings
REDIS_POOL_SIZE=10
REDIS_TIMEOUT=5000

# Memory limits
NODE_OPTIONS="--max-old-space-size=2048"

# ======================================
# Development/Testing Overrides
# ======================================
# Set to true only for staging environments
ENABLE_TEST_ENDPOINTS=false
ENABLE_DEBUG_LOGGING=false
SKIP_SSL_VERIFICATION=false

# ======================================
# Webhook Configuration
# ======================================
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY=2000

# ======================================
# Additional Security Headers
# ======================================
CONTENT_SECURITY_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline' https://js.stripe.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://api.stripe.com"
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
REFERRER_POLICY=strict-origin-when-cross-origin